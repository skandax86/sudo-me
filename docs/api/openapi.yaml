openapi: 3.0.0
info:
  title: Personal Development System API
  version: 1.0.0
  description: RESTful API for Personal Development System (PDS)
  contact:
    name: PDS Support
    email: support@pds.example.com
  license:
    name: Proprietary

servers:
  - url: https://api.pds.example.com/v1
    description: Production server
  - url: https://api-staging.pds.example.com/v1
    description: Staging server
  - url: http://localhost:5001/v1
    description: Local development

security:
  - bearerAuth: []

paths:
  /daily/log:
    post:
      summary: Create daily log
      tags: [Daily Logs]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DailyLog'
      responses:
        '201':
          description: Daily log created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DailyLogResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /finance/transactions:
    post:
      summary: Add transaction
      tags: [Finance]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Transaction'
      responses:
        '201':
          description: Transaction created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionResponse'
        '400':
          $ref: '#/components/responses/BadRequest'

  /finance/budget:
    get:
      summary: Get budget
      tags: [Finance]
      parameters:
        - name: month
          in: query
          required: true
          schema:
            type: string
            pattern: '^\d{4}-\d{2}$'
          example: '2024-01'
      responses:
        '200':
          description: Budget data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Budget'

  /goals:
    get:
      summary: Get goals
      tags: [Goals]
      parameters:
        - name: timeframe
          in: query
          schema:
            type: string
            enum: [Short-term, Mid-term, Long-term]
        - name: status
          in: query
          schema:
            type: string
            enum: [Not Started, In Progress, Completed, Cancelled, On Hold]
      responses:
        '200':
          description: List of goals
          content:
            application/json:
              schema:
                type: object
                properties:
                  goals:
                    type: array
                    items:
                      $ref: '#/components/schemas/Goal'
                  total:
                    type: number

    post:
      summary: Create goal
      tags: [Goals]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GoalCreate'
      responses:
        '201':
          description: Goal created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Goal'

  /goals/suggest:
    post:
      summary: Get LLM-powered goal suggestions
      tags: [Goals, LLM]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                timeframe:
                  type: string
                  enum: [Short-term, Mid-term, Long-term]
                context:
                  type: string
      responses:
        '200':
          description: Goal suggestions
          content:
            application/json:
              schema:
                type: object
                properties:
                  suggestions:
                    type: array
                    items:
                      $ref: '#/components/schemas/GoalSuggestion'

  /llm/advice:
    get:
      summary: Get personalized coaching advice
      tags: [LLM]
      responses:
        '200':
          description: Coaching tip
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CoachingTip'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    DailyLog:
      type: object
      required: [date, habits, fitness, learning]
      properties:
        date:
          type: string
          format: date
          example: '2024-01-15'
        habits:
          $ref: '#/components/schemas/Habits'
        fitness:
          $ref: '#/components/schemas/Fitness'
        learning:
          $ref: '#/components/schemas/Learning'
        journal:
          $ref: '#/components/schemas/Journal'

    Habits:
      type: object
      required: [wokeUpAt6am, coldShower, noPhoneFirstHour, meditated, plannedTomorrow]
      properties:
        wokeUpAt6am:
          type: boolean
        coldShower:
          type: boolean
        noPhoneFirstHour:
          type: boolean
        meditated:
          type: boolean
        plannedTomorrow:
          type: boolean

    Fitness:
      type: object
      required: [workoutType, waterIntakeOz]
      properties:
        workoutType:
          type: string
          enum: [Gym, Run, Calisthenics, Swim, Rest]
        waterIntakeOz:
          type: number
          minimum: 0
          maximum: 200
        sleepHours:
          type: number
          minimum: 0
          maximum: 24

    Learning:
      type: object
      required: [leetCodeSolved, pagesRead, studyHours]
      properties:
        leetCodeSolved:
          type: integer
          minimum: 0
        pagesRead:
          type: integer
          minimum: 0
        studyHours:
          type: number
          minimum: 0
          maximum: 24

    Journal:
      type: object
      properties:
        impulseControlRating:
          type: integer
          minimum: 1
          maximum: 5
        notes:
          type: string
          maxLength: 5000

    Transaction:
      type: object
      required: [amount, type, category, description, date]
      properties:
        amount:
          type: number
          minimum: 0
        type:
          type: string
          enum: [Expense, Income]
        category:
          type: string
          enum: [Essentials, Wants, Investments, Savings, Goals]
        description:
          type: string
          maxLength: 500
        date:
          type: string
          format: date-time

    Goal:
      type: object
      required: [id, title, category, timeframe, targetDate, priority, status]
      properties:
        id:
          type: string
        title:
          type: string
          maxLength: 200
        description:
          type: string
          maxLength: 1000
        category:
          type: string
          enum: [Fitness, Career, Finance, Habits, Learning, Travel, Health, Lifestyle]
        timeframe:
          type: string
          enum: [Short-term, Mid-term, Long-term]
        targetDate:
          type: string
          format: date-time
        priority:
          type: string
          enum: [High, Medium, Low]
        status:
          type: string
          enum: [Not Started, In Progress, Completed, Cancelled, On Hold]
        progress:
          type: number
          minimum: 0
          maximum: 100

    GoalCreate:
      type: object
      required: [title, category, timeframe, targetDate, priority]
      properties:
        title:
          type: string
          maxLength: 200
        description:
          type: string
          maxLength: 1000
        category:
          type: string
          enum: [Fitness, Career, Finance, Habits, Learning, Travel, Health, Lifestyle]
        timeframe:
          type: string
          enum: [Short-term, Mid-term, Long-term]
        targetDate:
          type: string
          format: date-time
        priority:
          type: string
          enum: [High, Medium, Low]

    Error:
      type: object
      required: [code, message, status]
      properties:
        code:
          type: string
        message:
          type: string
        status:
          type: integer
        details:
          type: object

  responses:
    BadRequest:
      description: Bad request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    Unauthorized:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    NotFound:
      description: Not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    InternalError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'




